## Руководство для templer.py

Для Linux: `python3`

Для Windows: `python`

### Пример команды

```
python .\templer.py template --os alt8 -tl .\templates -rt result
OR
python3 .\templer.py template --os alt8 -tl .\templates -rt result
```
### Экспорт YAML файла для определенной сущности ОС

Пример
```
python .\templer.py get-os-yaml -os debian10 -p <путь_до_общего_YAML>
```

Также можно указать несколько ОС
```
python .\templer.py get-os-yaml -os debian10 debian9 -p <путь_до_общего_YAML>
```

В папку `yamls` будет экспортирован YAML по debian.

Его (их) можно независимо использовать в системах с шаблонированием через `jinja`

### Узнать о дополнительных функциях

```
python .\templer.py --help
OR
python3 .\templer.py --help
```

### Формат переменной для поддержки шаблонизации

`{{ПЕРЕМЕННАЯ}}` - формат переменной для включения в шаблон

```
Какой-то текст
Какой-то текст{{ПЕРЕМЕННАЯ}}
Какой-то текст
{{ПЕРЕМЕННАЯ}}

```

**!!!Внимание:** Для использования пользовательских переменных внутри файла-указателя (pointer.yaml) используется тот же формат, однако замена на значение только **inline**

### Команда для запуска тестов

```
python .\tests.py
OR
python3 .\tests.py
```
Также, в тестах находится шаблонируемый образец (в котором будет производится замена зашаблонированных имен на их значение в файле-указателе) и файл-указатель шаблона (pointer.yaml)

Небольшая часть файла-указатель:
```yaml
RHEL79:
    (*): [RHEL78]
    os_name: rhel79
    os_adder: >
        {{EMPTY}}
    text_name: семейство RedHat, RedHat Enterprise Linux 7.9
    docker_image: jatoba-rhel:7.9
    docker_command: CMD source ~/.bashrc && /srv/app/Jatoba/install/rpm/build.sh
    cmake_version: cmake
    google_tests:
        ->: OPENSUSE15SP3
    disable_params:
        ->: OPENSUSE15SP3

RHEL78:
    (*): [ALTEROS7]
    os_name: rhel78
    os_adder: >
        {{EMPTY}}
    text_name: семейство RedHat, RedHat Enterprise Linux 7.8
    docker_image: jatoba-rhel:7.8
    docker_command: CMD source ~/.bashrc && /srv/app/Jatoba/install/rpm/build.sh
    cmake_version: cmake
    python3_devel: >
        BuildRequires:	python3-devel
    python_devel: >
        BuildRequires:	python2-devel
```
> **Первый уровень** в YAML нужен для разделения вариантов шаблонов при использовании разных операционных системах, версиях платформ, окружения и т.п

В данном случае, в первый уровень входят такие сущности как: RHEL79, RHEL78

> **Второй уровень**: содержит пару из имени шаблона и его взаимозаменяемого значения для подстановки в шаблон

**( * )** - **не является** именем шаблона! Это необязательное указывание класса/ов , от которой/ых можно унаследовать зашаблонированные имена и их значения.

Поддерживается формат как ( * ): ALT8, так и ( * ): [ALT8]. 
( * ): [ALT8, ALT9, CENTOS78] - перечисление наследования.

Первый класс является самым приоритетным. Если у второго класса есть зашаблонированные переменные, которые не используются в первом классе - они будут добавлены,
если же уже используются, то из второго класса не будут унаследованы - только из первого. И так далее с третьим, четвертым... классами.

**->: CLS** - Если у зашаблонированного параметра указано значение формата ->: ALT8, то это означает, что данный параметр имеет значение, указанное у класса ALT8, и именно это значение будет использоваться во время процесса шаблонизации и замены

Пример, в котором `disable_params` получить значение параметра `disable_params` из `OPENSUSE15SP3`
```
disable_params:
        ->: OPENSUSE15SP3
```
Третьего и более уровней - **не существует!**
